<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="mainDiv">
        <div>
            <span id="min">0:</span>
            <span id="secs">0:</span>
            <span id="msecs">0</span>
            <div>
            <button id="start">start</button>
            <button id="stop">stop</button>
            <button id="reset">reset</button>
            </div>
        </div>
    </div>

    <script>
        // function start() {
        //     document.getElementById('start'). onclick = watch;
        // }
        // document.getElementById('start'). onclick = watch;

        let ms = 0;
        let secs = 0;
        let mins =0;
        let flag = true;
        var running_instance_count= 0;

        // function watch (){
        //     ms += 1;
        //     document.getElementById('msecs').innerText = `${ms}`;
        //     if(ms == 1000){
        //         ms =0;
        //         secs++
        //         document.getElementById('secs').innerText = `${secs}:`
        //         if(secs == 60){
        //             mins++;
        //             document.getElementById('min').innerText = `${mins}:`;
        //             secs = 0;
        //         }
        //     }
        // }
        // let ms = 0;
        // let secs = 0;
        // let mins =0;

        

            watchFunction =()=> {if(flag){
            ms +=4 ;
            document.getElementById('msecs').innerText = `${ms}`;
            if(ms == 1000){
                ms =0;
                secs++
                document.getElementById('secs').innerText = `${secs}:`
                if(secs == 60){
                    mins++;
                    document.getElementById('min').innerText = `${mins}:`;
                    secs = 0;
                }
            }}}
            // startFunction = ()=>{
            //     setInterval(watchFunction,1);
            // }
            var setIntID;

            document.getElementById("start").addEventListener('click', function(){
                
                   flag = true;
                //    startFunction()
                    running_instance_count++;
                    if(running_instance_count == 1){
                
                   setIntID = setInterval(watchFunction,1);}
                
                   console.log(flag)
                
            })
            document.getElementById("stop").addEventListener('click', function(){
                flag = false;
                running_instance_count = 0;
                console.log(flag);
                clearInterval(setIntID);
                
                
                
            })
            document.getElementById('reset').addEventListener('click', function(){
            flag = false;
            ms=0; secs=0; mins=0;
            running_instance_count = 0;
            clearInterval(setIntID);
            document.getElementById('msecs').innerText = `${0}`;
            document.getElementById('secs').innerText = `${0}:`;
            document.getElementById('min').innerText = `${0}:`;

            })
        




        // setInterval( function(){
        //     secs++;
        //     document.getElementById('secs').innerText = `${secs}:`;
        //     if(secs == 60){
        //         secs = 0;
        //     }
        //     }, 1000)

        // setInterval( function(){
        //     mins++;
        //     document.getElementById('min').innerText = `${mins}:`;
        //     }, 60000)
    

        

            
        




        
       
    </script>
</body>
</html>